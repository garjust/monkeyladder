{% extends "base.html" %}

{% load humanize %}

{% block head %}
<script type="text/javascript">
	$(function() {
	    $(".match-entry").bind("click", function(event) {
	    	$("#match-detail > div").css("display", "none")
	    	$("#" + event.currentTarget.id + "-detail").css("display", "block")
	    })
	});
	{% if match_id %}
	$(function() {
		$("#match-entry-{{ match_id }}-detail").css("display", "block")
	})
	{% endif %}
</script>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="span6">
            <div class="page-header muted">
                <h2>{{ ladder }}&nbsp;Matches</h2>
            </div>
            <div>
                <table class="table">
                    <thead>
                        <th>Match</th>
                        <th>Date</th>
                    </thead>
                    <tbody>
                    {% for match in matches %}
	                   <tr id="match-entry-{{ match.id }}" class="match-entry">
	                       <td>{{ match }}</td>
	                       <td>Played {{ match.created|naturaltime }}</td>
	                   </tr>      
	                {% empty %}
	                   <td>-</td>
	                   <td>-</td>
	                {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="pagination">
                <ul>
                    {% if matches.has_previous %}<li><a href="{{ ladder.get_absolute_url }}leaderboard/matches/?id=&page={{ matches.previous_page_number }}">Previous</a></li>{% endif %}
                    {% if matches.has_next %}<li><a href="{{ ladder.get_absolute_url }}leaderboard/matches/?id=&page={{ matches.next_page_number }}">Next</a></li>{% endif %}
                </ul>
            </div>
        </div>
        <div class="span6">
            <div id="match-detail">
	        {% for match in matches %}
	            <div id="match-entry-{{ match.id }}-detail" style="display: none">
	                <h2>{{ match }}</h2>
	                <h3>{{ match.created|naturaltime }}</h3>
	                {% for game in match.games %}
	                <h4>{{ game }}</h4>
	                {% endfor %}
	                <div>
	                {% include "core/content/comments.html" with commentable=match %}
	                </div>
	            </div>      
	        {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
