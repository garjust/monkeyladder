<div id="match-entry-form">
    <form class="" action="/ladders/{{ ladder.id }}/leaderboard/matches/create/" method="post">{% csrf_token %}
        <table id="match-entry-table">
            <tbody>
            {% for game_number in range form.number_of_games %} 
                <tr>
                    <td id="game-{{ game_number }}-first-player-score" class="match-player-entry">
                    {{ form.player_one_score }}
                    </td>
                    <td id="game-{{ game_number }}-second-player-score" class="match-score-entry">
                    {{ form.player_one_score }}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {{ form.ladder_id }}
        <input type="hidden" name="next" value="{{ request.path }}"/>
        <div id="match-entry-form-submit">
            <input class="btn btn-large" type="submit" value="Submit Match" />
        </div>   
    </form>
    {% if form.success %}
        <div id="match-created-success" class="success">
            <div>
                <p>{{ form.success }}</p>
            </div>
        </div>
    {% endif %}
    {% if form.errors %}
        <div id="site-error" class="error">
            <div>
                <p>{{ form.errors }}</p>
            </div>
        </div>
    {% endif %}
</div>
<script type="text/javascript">
    $("#id_ladder_id").attr("value", {{ ladder.id }});
    $("#id_player_one_score").addClass("input-mini")
    $("#id_player_two_score").addClass("input-mini")
    $("#id_player_one").addClass("player-name-autocomplete")
    $("#id_player_two").addClass("player-name-autocomplete")
    $(".player-name-autocomplete").autocomplete({
        source: [{% autoescape off %}{{ player_names }}{% endautoescape %}], delay: 50
    });
    console.log("asdasd")
	$(function() {
	    var form = $("#match-entry-form > form");
	    form.submit(function(e) {
	        $("#match-entry-form-submit > input").attr('disabled', true)
	        $("#match-entry-span").load(form.attr('action'), form.serializeArray(), function(responseText, responseStatus) {
	            $("#match-entry-form-submit > input").attr('disabled', false)
	            $("#ladder-display-span").load("content/ladder_display/")
	            $("#match-feed-span").load("leaderboard/content/match_feed/")
	        });
	        e.preventDefault(); 
	    });
	});
</script>